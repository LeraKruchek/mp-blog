!function(){angular.module("blog-app",["ui.router","blog-app.directives","blog-app.controllers"]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(a,b,c){a.html5Mode(!0),c.otherwise("firstPost"),b.state("firstPost",{url:"/",controller:"FirstPostController",controllerAs:"FirstPostController",templateUrl:"/public/dist/templates/first-post.html"}).state("post",{url:"/articles/:id",controller:"PostController",controllerAs:"PostCtrl",templateUrl:"/public/dist/templates/single-post.html"})}])}(),function(){function a(a,b){var c=this;c.posts=[],b.getPosts().then(function(a){c.posts=a.sort(function(a,b){return b.date-a.date})})}function b(a,b,c,d){var e=this,f=c.id;console.log(d.path()),console.log(d.search()),e.posts=[],b.getPosts().then(function(a){e.posts=a.sort(function(a,b){return b.date-a.date}),e.currentPost=e.posts.filter(function(a){return a.visible_id===f}),e.currentPost=e.currentPost[0],e.nextPost=e.posts[e.posts.indexOf(e.currentPost)+1],e.previousPost=e.posts[e.posts.indexOf(e.currentPost)-1]})}angular.module("blog-app.controllers",["blog-app.services","blog-app.filters"]).controller("FirstPostController",a).controller("PostController",b),a.$inject=["$scope","PostFactory"],b.$inject=["$scope","PostFactory","$stateParams","$location"]}(),function(){function a(){return{restrict:"A",scope:{backImage:"@"},link:function(a,b,c){c.$observe("backImage",function(a){b.css({"background-image":"url("+a+")","background-size":"cover"})})}}}angular.module("blog-app.directives",[]).directive("backImage",a)}(),function(){function a(){return function(a){var b=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],c=new Date(a);return c.getDate()+" "+b[c.getMonth()]+", "+c.getFullYear()}}function b(a){return function(b){return a.trustAsHtml(b)}}angular.module("blog-app.filters",[]).filter("rusDate",a).filter("sanitize",b),b.$inject=["$sce"]}(),function(){function a(a,b){var c={};return c.getPosts=function(){var c=b.defer();return a.get("/api/posts").success(function(a){c.resolve(a)}).error(function(){console.log("error")}),c.promise},c}angular.module("blog-app.services",[]).factory("PostFactory",a),a.$inject=["$http","$q"]}();